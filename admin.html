<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Admin RAUN-Rachid2025</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="admin.js"></script>
  <style>
    body { background: black; color: lime; font-family: monospace; }
    .login-box { margin: 60px auto; max-width: 350px; border: 2px solid #33ff33; padding: 25px 25px 15px; border-radius: 16px; }
    input, button { background: black; color: lime; border: 1px solid #33ff33; font-family: monospace; font-size: 1.1rem; padding: 7px; border-radius: 8px; }
    .capsule-admin { border: 1px solid #33ff33; margin: 18px 0; padding: 12px; border-radius: 10px; }
    .danger { color: #ff3333; font-weight: bold; }
  </style>
</head>
<body>
  <canvas id="matrixRain"></canvas>
  <img src="photo.jpg" alt="Rachid" class="profile-photo">
  <a href="index.html" style="color:#00ffff;">‚Üê Retour √† la page publique</a>
  <div class="login-box" id="loginBox">
    <h2>Connexion Admin <span style="font-size:1.5em;">üîê</span></h2>
    <input type="email" id="adminEmail" placeholder="Email" required><br><br>
    <input type="password" id="adminPassword" placeholder="Mot de passe" required><br><br>
    <button onclick="loginAdmin()">Se connecter</button>
    <div id="loginError" class="danger"></div>
  </div>

  <div id="adminPanel" style="display:none;">
    <h2>Capsules (Gestion Admin)</h2>
    <form id="addCapsuleForm">
      <input type="text" id="titre" placeholder="Titre" required><br><br>
      <textarea id="contenu" placeholder="Contenu" required></textarea><br>
      <button type="submit">Ajouter la capsule</button>
    </form>
    <div id="capsulesList"></div>
    <button onclick="logoutAdmin()">D√©connexion</button>
  </div>

  <script>
    // Matrix Rain
    const canvas = document.getElementById('matrixRain');
    const ctx = canvas.getContext('2d');
    let w = window.innerWidth, h = window.innerHeight;
    canvas.width = w; canvas.height = h;
    let cols = Math.floor(w/16), drops = Array(cols).fill(1);
    function drawMatrix() {
        ctx.fillStyle = "rgba(0,0,0,0.18)";
        ctx.fillRect(0,0,w,h);
        ctx.font = "16px monospace";
        for(let i=0;i<cols;i++) {
            let txt = String.fromCharCode(0x30A0 + Math.random()*96);
            ctx.fillStyle = "#00FF41";
            ctx.fillText(txt, i*16, drops[i]*18);
            if(drops[i]*18 > h && Math.random() > 0.975) drops[i]=0;
            drops[i]++;
        }
    }
    setInterval(drawMatrix, 41);
    window.addEventListener("resize", ()=>{
        w = window.innerWidth; h = window.innerHeight;
        canvas.width = w; canvas.height = h;
        cols = Math.floor(w/16); drops = Array(cols).fill(1);
    });
  </script>
</body>
</html>
